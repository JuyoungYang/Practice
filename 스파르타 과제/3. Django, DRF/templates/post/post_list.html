{% extends 'base.html' %}

{% block content %}
<style>
   body {
       min-height: 100vh;
       display: flex;
       flex-direction: column;
       margin: 0;
   }

   main {
       flex: 1;
   }

   .footer {
       margin-top: auto;
       padding: 1rem;
       text-align: center;
       background-color: #FFE4E8; 
   }

   .posts-container {
       max-width: 800px;
       margin: 3rem auto;
       padding: 0 1rem;
   }

   .header-section {
       display: flex;
       justify-content: space-between;
       align-items: center;
       margin-bottom: 2rem;
   }

   .page-title {
       font-size: 2rem;
       font-weight: bold;
       color: #333;
   }

   .search-section {
       display: flex;
       justify-content: space-between;
       align-items: center;
       margin-bottom: 2rem;
       background: #fff;
       padding: 1rem;
       border-radius: 10px;
       box-shadow: 0 2px 8px rgba(0,0,0,0.05);
   }

   .search-form {
       display: flex;
       flex-grow: 1;
       margin-right: 1rem;
   }

   .search-input {
       width: 100%;
       padding: 0.8rem 1rem;
       border: 2px solid #FFB6C1;
       border-radius: 8px;
       font-size: 1rem;
       outline: none;
       transition: all 0.3s ease;
   }

   .search-input:focus {
       border-color: #ff8da1;
       box-shadow: 0 0 0 3px rgba(255,182,193,0.2);
   }

   .btn {
       padding: 0.8rem 1.5rem;
       border: none;
       border-radius: 8px;
       font-weight: 600;
       cursor: pointer;
       transition: all 0.3s ease;
       display: flex;
       align-items: center;
       gap: 0.5rem;
       text-decoration: none;
   }

   .btn-pink {
       background-color: #FFB6C1;
       color: white;
   }

   .btn-pink:hover {
       background-color: #ff8da1;
       transform: translateY(-1px);
   }

   .post-card {
       background: white;
       border-radius: 10px;
       padding: 1.5rem;
       margin-bottom: 1.5rem;
       box-shadow: 0 2px 8px rgba(0,0,0,0.05);
       transition: all 0.3s ease;
   }

   .post-card:hover {
       transform: translateY(-3px);
       box-shadow: 0 4px 12px rgba(0,0,0,0.1);
   }

   .post-title {
       font-size: 1.3rem;
       color: #333;
       text-decoration: none;
       font-weight: 600;
       display: block;
       margin-bottom: 0.8rem;
   }

   .post-title:hover {
       color: #FFB6C1;
   }

   .post-meta {
       color: #666;
       font-size: 0.9rem;
       margin-bottom: 0.8rem;
   }

   .post-stats {
       display: flex;
       gap: 1.5rem;
       color: #888;
       font-size: 0.9rem;
   }

   .stat-item {
       display: flex;
       align-items: center;
       gap: 0.4rem;
   }

   .stat-item i {
       color: #FFB6C1;
   }

   .pagination {
       display: flex;
       justify-content: center;
       align-items: center;
       gap: 1rem;
       margin-top: 3rem;
       margin-bottom: 3rem;
   }

   .page-btn {
       padding: 0.5rem 1rem;
       border: 2px solid #FFB6C1;
       border-radius: 6px;
       color: #FFB6C1;
       text-decoration: none;
       transition: all 0.3s ease;
   }

   .page-btn:hover {
       background-color: #FFB6C1;
       color: white;
   }

   .current-page {
       color: #666;
       font-weight: 600;
   }
</style>

<div class="posts-container">
   <div class="header-section">
       <h2 class="page-title">게시글 목록</h2>
       {% if user.is_authenticated %}
           <a href="{% url 'post:post_create' %}" class="btn btn-pink">
               <i class="fas fa-plus"></i>새 글 작성
           </a>
       {% endif %}
   </div>

   <div class="search-section">
       <form class="search-form" method="get">
           <input type="text" class="search-input" name="search" value="{{ search_query }}" 
                  placeholder="검색어를 입력하세요" autocomplete="off">
       </form>
       <button type="submit" class="btn btn-pink">
           <i class="fas fa-search"></i>검색
       </button>
   </div>

   {% for post in posts %}
       <div class="post-card">
           <a href="{% url 'post:post_detail' post.pk %}" class="post-title">
               {{ post.title }}
           </a>
           <div class="post-meta">
               <i class="fas fa-user"></i> {{ post.author.username }} | 
               <i class="far fa-clock"></i> {{ post.created_at|date:"Y-m-d H:i" }}
           </div>
           <div class="post-stats">
               <div class="stat-item">
                   <i class="fas fa-heart"></i>
                   <span>{{ post.likes.count }}</span>
               </div>
               <div class="stat-item">
                   <i class="fas fa-comment"></i>
                   <span>{{ post.comments.count }}</span>
               </div>
           </div>
       </div>
   {% empty %}
       <div class="post-card">
           <p style="text-align: center; color: #666;">게시글이 없습니다.</p>
       </div>
   {% endfor %}

   {% if paginator.num_pages > 1 %}
   <div class="pagination">
       {% if posts.has_previous %}
           <a href="?page={{ posts.previous_page_number }}" class="page-btn">&laquo; 이전</a>
       {% endif %}
       
       <span class="current-page">
           {{ posts.number }} / {{ posts.paginator.num_pages }}
       </span>

       {% if posts.has_next %}
           <a href="?page={{ posts.next_page_number }}" class="page-btn">다음 &raquo;</a>
       {% endif %}
   </div>
   {% endif %}
</div>
{% endblock %}